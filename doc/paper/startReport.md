# 开题启动-草稿版

#### 缑通旺 205544 2021.11.27



# 《基于WASM的跨平台网络代理桌面系统的设计与实现》



## 一、基本背景

​	虽然当前随着手机、平板、5G等等的普及，我们更多的时间都是从电脑桌面转移到了网页、移动端这些地方，但是桌面应用系统仍然是未来几十年内，最有生命力的生产力工具。因为桌面应用使用带给我们的沉浸式体验，是web浏览器、手机app无法拥有的，同时桌面应用会极大的利用操作系统带来扩展性和可操作性。但是桌面应用的开发带给我们的关键字是：复杂、不跨平台、开发效率低等等。因此，我们想基于WebAssembly高性能编码、Electron跨平台技术等新兴的技术方案，帮助我们实现可以高效率、跨平台的网络检测应用系统。

​	无论使用什么应用、网页，大部分的流程都是需要我们在客户端进行和服务端的网络通信，从而达到方面我们生活、娱乐的目的。而**网络代理**，顾名思义，是为了代理我们在使用电脑时网络，把所有网络通讯转发到我们的服务上，这样我们浏览的网页，我们使用的应用到底在请求连接那些服务？到底在向服务端请求什么？服务之间的代理又在做那些事情？这些都是包含在我们每一次的网络请求中，就可以被我们的服务获取。所以，我们可以基于网络代理可以实现抓包、解析、生成等等，来挖掘其中的价值。

## 二、技术名词解释

​	首先WebAssembly和Electron都是比较新兴的技术。Electron是2014年才正式开源技术，而WebAssembly技术是2017年才推出了第一个版本。

### 2.1 WebAssembly

​	WebAssembly(简称wasm) 是一个可移植、体积小、加载快并且兼容 Web 的全新格式，是一种新的编码方式，可以在现代的网络浏览器中运行。它是一种低级的类汇编语言，具有紧凑的二进制格式，可以接近原生的性能运行，并为诸如C / C ++ / Rust 等语言提供一个编译目标，以便它们可以在js runtime上运行。它也被设计为可以与JavaScript共存，允许两者一起工作。

一些其他抽象概念：

- 模块：表示一个已经被编译为可执行机器码的WebAssembly二进制代码。一个模块是无状态的，并且像一个二进制大对象（Blob）一样能够被缓存到IndexedDB中或者在windows和workers之间进行共享。
- 内存：ArrayBuffer，大小可变。本质上是连续的字节数组，WebAssembly的低级内存存取指令可以对它进行读写操作。
- 表格：带类型数组，大小可变。表格中的项存储了不能作为原始字节存储在内存里的对象的引用（为了安全和可移植性的原因）

### 2.2 Electron 

​	Electron是一个基于Web构建桌面应用程序的底层工具框架。 它允许使用 Node.js 和 Chromium 完成桌面 GUI 应用程序的开发。通过嵌入Chromium 和 Node.js 到二进制的 Electron 可以构建跨平台桌面程序(Mac、Windows、Linux)。而C hromium是Google公司基于V8引擎

优点：

- 将 Chromium 与 Node.js 集成到同一个运行时环境中
- 不必考虑兼容性问题，只需关注 Chromium 版本即可
- 使用 Node 强大的API，可以使web页面操作文件，调用系统API，操作数据库…
- 也不必考虑跨域问题

缺点：

- 性能上比原生应用要低
- 最终打包后体积较大

当然这两个缺点也是跨平台的开发体验所带来的，所以要通过C++/Rust来编译WebAssebmly这种高性能编码来提高性能、减少体积，从而优化这两个缺点，也是我毕业设计需要研究和学习的地方。



## 三、系统的初衷

​	想要实现这个系统的目的和初衷，以及所能解决的问题？

​	首先网络上已经有几个比较知名的网络相关的工具，比如：Charles、Postman等等，相比较这些应用，我们解决的问题是什么？

​	首先Postman是一个自顶向下的一个基于网络请求的工具，而Charles只是网络层的抓包工具。我们想实现的不仅仅是自顶向下的请求，还可以自底向上的通过抓到包去逆向工程反解出一些信息，自动生成api，更甚之，我们可以生成不同编程语言的相关代码片段。再就是，想通过融入语音控制操作等等智能化方案，让我们的应用更加智能！

​	通过系统，可以帮我们

- 实现常规的抓包、分析请求参数、header头信息的展示和管理
- 实现本地开发的mock数据，提高本地开发效率
- 实现对抓包数据的，可视化展示以及个性化处理
- 实现通过对代码生成接口，以及通过包信息逆转为接口的智能转换的管理
- ......

## 四、研究学习内容

​	具体更细节，可能需要在研究学习过程中，进一步的分化消解。在此大概列举一些通过前期技术选型、调研，对系统整体来看想到的一些点：

- 网络代理，如何拦截并分析？

- 不同操作系统层面的内存管理、权限分割、网络事件、进程隔离等等

​	因为作为桌面应用，我们直接面对的就是操作系统，我们需要了解操作系统的运行逻辑，以及开发的扩展性。我们要充分利用对操作系统的性能、api。	

​	具体还需要深一步学习了解

- 基本开发方式及Electron框架开发

​	首先就是掌握Electron开发、shell、前后端交互，一些常规的开发技术

- WebAssembly编译高性能算法

​	预计采用C++或者Rust语言实现高性能模块，提高系统的稳定性、性能。

​	比如，当网络请求过多时，我们如何保证系统的正常运行，如果是解释型语言，它的效率可能会较差。所以我们在计算密集型的数据处理方面，可能需要WebAssembly的帮助。

​	再比如，在可视化展示的部分，我们除了使用2D/3D绘图技术，同样的我们也需要WebAssembly这种编码格式，来提高 我们可视化的稳定和渲染性能。

- *代码编译代码生成，支持高亮，通过分词、词法、语法、语义分析

   无论是要生成什么样代码，都需要通过编译前端的token分词、parser分析，生成AST(抽象语法树)来进一步生成代码。这个部分作为进阶实现。

- ......







